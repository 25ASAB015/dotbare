version: 0.2

phases:
  install:
    commands:
      - echo Installing shellcheck ...
      - apt-get update -y
      - apt-get install shellcheck -y
  build:
    commands:
      - echo Checking script compliance
      - ./shellcheck.sh
      - echo Building docker image ...
      - docker image build -t kazhala/dotbare:test -f tests/Dockerfile .
      - echo Running bats unittest ...
      - docker container run -it --rm --name dotbare kazhala/dotbare:test
